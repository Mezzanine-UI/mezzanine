@use '~@mezzanine-ui/system/palette';
@use '~@mezzanine-ui/system/transition';
@use '~@mezzanine-ui/system/typography';
@use '~@mezzanine-ui/system/spacing';
@use '../icon';
@use '../text-field';
@use './form-field' as *;

// FormFieldSize variants - keep this list in sync with TypeScript enum FormFieldSize
$form-field-sizes: (
  'horizontal-base',
  'horizontal-tight',
  'horizontal-narrow',
  'horizontal-wide',
  'stretch-tight',
  'stretch-narrow',
  'stretch-wide',
  'vertical'
);

// FormFieldHintTextColor variants - keep this list in sync with TypeScript enum FormFieldHintTextColor
$form-field-hint-text-colors: (
  'info',
  'warning',
  'error',
  'success',
);

// FormFieldCounterColor variants - keep this list in sync with TypeScript enum FormFieldCounterColor
$form-field-counter-colors: (
  'info',
  'warning',
  'error',
);

@each $size in $form-field-sizes {
  .#{$prefix}--#{$size} {
    // 根據 size 設置不同的樣式
    @if $size == 'horizontal-base' {
      display: flex;
      flex-wrap: nowrap;
      align-items: baseline;
      .#{$prefix}__label-area {
        width: fit-content;
      }
      .#{$prefix}__data-entry {
        flex-grow: 1;
        max-width: spacing.semantic-variable(size, container, wide);
      }
    } @else if $size == 'horizontal-tight' {
      display: flex;
      flex-wrap: nowrap;
      align-items: baseline;
      .#{$prefix}__label-area {
        width: spacing.semantic-variable(size, container, tight);
      }
      .#{$prefix}__data-entry {
        flex-grow: 1;
        max-width: spacing.semantic-variable(size, container, wide);
      }
    } @else if $size == 'horizontal-narrow' {
      display: flex;
      flex-wrap: nowrap;
      align-items: baseline;
      .#{$prefix}__label-area {
        width: spacing.semantic-variable(size, container, slim);
      }
      .#{$prefix}__data-entry {
        flex-grow: 1;
        max-width: spacing.semantic-variable(size, container, wide);
      }
    } @else if $size == 'horizontal-wide' {
      display: flex;
      flex-wrap: nowrap;
      align-items: baseline;
      .#{$prefix}__label-area {
        width: spacing.semantic-variable(size, container, narrow);
      }
      .#{$prefix}__data-entry {
        flex-grow: 1;
        max-width: spacing.semantic-variable(size, container, wide);
      }
    } @else if $size == 'stretch-tight' {
      display: flex;
      flex-wrap: nowrap;
      align-items: baseline;
      justify-content: space-between;
      .#{$prefix}__label-area {
        width: fit-content;
      }
      .#{$prefix}__data-entry {
        flex-grow: 1;
        max-width: spacing.semantic-variable(size, container, slim);
      }
    } @else if $size == 'stretch-narrow' {
      display: flex;
      flex-wrap: nowrap;
      align-items: baseline;
      justify-content: space-between;
      .#{$prefix}__label-area {
        width: fit-content;
      }
      .#{$prefix}__data-entry {
        flex-grow: 1;
        max-width: spacing.semantic-variable(size, container, standard);
      }
    } @else if $size == 'stretch-wide' {
      display: flex;
      flex-wrap: nowrap;
      align-items: baseline;
      justify-content: space-between;
      .#{$prefix}__label-area {
        width: fit-content;
      }
      .#{$prefix}__data-entry {
        flex-grow: 1;
        max-width: spacing.semantic-variable(size, container, broad);
      }
    } @else if $size == 'vertical' {
      display: flex;
      flex-direction: column;
      gap: spacing.semantic-variable(gap, tight);
      .#{$prefix}__label-area {
        width: fit-content;
        padding-top: spacing.semantic-variable(padding, vertical, tiny);
        padding-bottom: spacing.semantic-variable(padding, vertical, tiny);
      }
      .#{$prefix}__data-entry {
        flex-grow: 1;
        max-width: spacing.semantic-variable(size, container, wide);
        margin-left: 0;
      }
    }
  }
}

.#{$prefix}__label {
  display: flex;
  color: palette.semantic-variable(text, neutral-solid);

  @include typography.semantic-variable(label-primary);

  &__required-marker {
    margin-right: spacing.semantic-variable(gap, tiny);
    color: palette.semantic-variable(text, brand);
  }

  &__optional-marker {
    display: flex;
    align-items: center;
    margin-left: spacing.semantic-variable(gap, tiny);
    color: palette.semantic-variable(text, neutral);
  }

  &__information-marker {
    margin-left: spacing.semantic-variable(gap, tiny);
  }

  &__colon {
    margin-left: spacing.semantic-variable(gap, tight);
    color: palette.semantic-variable(text, neutral-solid);
  }
}

.#{$prefix}__label-area {
  padding-top: spacing.semantic-variable(padding, vertical, calm);
  padding-bottom: spacing.semantic-variable(padding, vertical, calm);
}

.#{$prefix}__data-entry {
  display: flex;
  flex-direction: column;
  margin-left: spacing.semantic-variable(gap, base);
  gap: spacing.semantic-variable(gap, slim);
}

.#{$prefix}__hint-text-and-counter-area {
  display: flex;
  flex-flow: row nowrap;
  align-items: center;
  justify-content: space-between;
  gap: spacing.semantic-variable(gap, base);
}

.#{$prefix}__counter {
  @include typography.semantic-variable(annotation);

  color: palette.semantic-variable(text, neutral);
}

@each $color in $form-field-counter-colors {
  .#{$prefix}__counter--#{$color} {
    @if $color == 'info' {
      color: palette.semantic-variable(text, neutral);
    } @else if $color == 'warning' {
      color: palette.semantic-variable(text, warning);
    } @else if $color == 'error' {
      color: palette.semantic-variable(text, error);
    }
  }
}

.#{$prefix}__hint-text {
  display: flex;
  flex-flow: row nowrap;
  flex-grow: 1;
  align-items: center;
  gap: spacing.semantic-variable(gap, tiny);
  color: palette.semantic-variable(text, neutral);

  @include typography.semantic-variable(annotation);
}

@each $color in $form-field-hint-text-colors {
  .#{$prefix}__hint-text--#{$color} {
    @if $color == 'info' {
      color: palette.semantic-variable(text, neutral);
    } @else if $color == 'warning' {
      color: palette.semantic-variable(text, warning);
    } @else if $color == 'error' {
      color: palette.semantic-variable(text, error);
    } @else if $color == 'success' {
      color: palette.semantic-variable(text, success);
    }
  }
}
