/* stylelint-disable declaration-property-value-keyword-no-deprecated */
@use 'sass:math';
@use '~@mezzanine-ui/system/effect' as effect;
@use '~@mezzanine-ui/system/palette' as palette;
@use '~@mezzanine-ui/system/radius' as radius;
@use '~@mezzanine-ui/system/spacing' as spacing;
@use '~@mezzanine-ui/system/transition' as transition;
@use '~@mezzanine-ui/system/typography';
@use '../button';
@use './breadcrumb' as *;

.#{$prefix} {
  align-items: center;
  display: flex;
  flex-wrap: nowrap;
  gap: spacing.semantic-variable(gap, tiny);
}

.#{$prefix}__item {
  position: relative;

  &__trigger {
    @include button.reset();

    align-items: center;
    border-radius: radius.variable(tiny);
    color: palette.semantic-variable(text, neutral);
    display: flex;
    gap: spacing.semantic-variable(gap, tiny);
    transition: transition.standard(color, fast), transition.standard(background-color, fast), transition.standard(box-shadow, fast);
    white-space: nowrap;


    &:focus-visible {
      background-color: palette.semantic-variable(background, white);
      box-shadow: effect.variable(focus, primary);
    }
  }

  &__icon {
    color: palette.semantic-variable(icon, neutral);
    transition: transition.standard(color, fast);
  }

  &--current {
    .#{$prefix}__item__trigger {
      color: palette.semantic-variable(text, neutral-solid);
    }
  }

  &--expanded {
    .#{$prefix}__item__trigger {
      color: palette.semantic-variable(text, neutral-solid);

      .#{$prefix}__item__icon {
        color: palette.semantic-variable(icon, neutral-solid);
      }
    }
  }

  &__menu {
    inset-block-start: calc(100% + spacing.semantic-variable(gap, tight-fixed));
    inset-inline-start: 0;
    position: absolute;
  }

  &__menu-item {
    // TODO: dropdown menu min-width
    position: relative;
    white-space: nowrap;
    width: fit-content;
  }

  &__menu-item__trigger {
    @include button.reset();

    align-items: center;
    display: flex;
    justify-content: space-between;
    min-width: 160px;
  }
}

a.#{$prefix}__item, button.#{$prefix}__item:not(.#{$prefix}__item--expanded) {
  &:hover {
    color: palette.semantic-variable(text, brand);

    .#{$prefix}__item__icon {
      color: palette.semantic-variable(icon, brand);
    }
  }
}
